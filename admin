<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Kdell Infotech Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
      background: #0b1220;
      color: #e5e7eb;
      display: flex;
      min-height: 100vh;
    }
    .sidebar {
      width: 220px;
      background: #020617;
      border-right: 1px solid #111827;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.2rem;
    }
    .sidebar h1 {
      font-size: 1rem;
      margin: 0;
    }
    .nav {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      font-size: 0.9rem;
    }
    .nav button {
      background: transparent;
      border: 0;
      text-align: left;
      color: #e5e7eb;
      padding: 0.4rem 0.3rem;
      border-radius: 0.35rem;
      cursor: pointer;
    }
    .nav button.active,
    .nav button:hover {
      background: #111827;
    }
    .main {
      flex: 1;
      padding: 1.2rem 1.5rem;
      background: #020617;
      overflow: auto;
    }
    h2 {
      margin-top: 0;
      font-size: 1.2rem;
    }
    .section {
      display: none;
    }
    .section.active {
      display: block;
    }
    .grid {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.4fr);
      gap: 1.5rem;
    }
    label {
      font-size: 0.8rem;
      display: block;
      margin-bottom: 0.2rem;
    }
    input, textarea, select {
      width: 100%;
      padding: 0.45rem 0.5rem;
      border-radius: 0.4rem;
      border: 1px solid #374151;
      background: #020617;
      color: #e5e7eb;
      font-size: 0.85rem;
      margin-bottom: 0.6rem;
    }
    textarea {
      min-height: 80px;
      resize: vertical;
    }
    button.primary {
      background: #0f766e;
      border: 1px solid #0f766e;
      border-radius: 999px;
      padding: 0.45rem 1.1rem;
      font-size: 0.85rem;
      cursor: pointer;
      color: #e5e7eb;
    }
    button.primary:hover {
      background: #115e59;
    }
    .list-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.85rem;
    }
    .list-table th,
    .list-table td {
      border-bottom: 1px solid #111827;
      padding: 0.35rem 0.3rem;
    }
    .list-table th {
      text-align: left;
      color: #9ca3af;
      font-weight: 500;
    }
    .pill {
      font-size: 0.72rem;
      padding: 0.1rem 0.4rem;
      border-radius: 999px;
      background: #0f766e;
      color: #e5e7eb;
    }
    .json-output {
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 0.8rem;
      background: #020617;
      border-radius: 0.5rem;
      border: 1px solid #111827;
      padding: 0.6rem;
      color: #e5e7eb;
      min-height: 140px;
      white-space: pre;
      overflow: auto;
    }
    .hint {
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 0.2rem;
    }
    @media (max-width: 900px) {
      .grid {
        grid-template-columns: minmax(0, 1fr);
      }
      .sidebar {
        display: none; /* keep mobile simple */
      }
    }
  </style>
</head>
<body>
  <aside class="sidebar">
    <h1>Kdell Admin</h1>
    <div class="nav">
      <button data-target="blog" class="active">Blog posts</button>
      <button data-target="jobs">Job templates</button>
      <button data-target="info">Info</button>
    </div>
  </aside>

  <main class="main">
    <!-- Blog section -->
    <section id="blog" class="section active">
      <h2>Blog posts</h2>
      <p class="hint">
        This tool reads <code>blog-posts.json</code> and lets you build a new JSON list.
        After editing, copy the JSON into your GitHub file to publish.
      </p>

      <div class="grid">
        <div>
          <h3>Create / edit post</h3>
          <label for="b-id">ID (no spaces, e.g. first-post)</label>
          <input id="b-id" />

          <label for="b-title">Title</label>
          <input id="b-title" />

          <label for="b-date">Date (YYYY-MM-DD)</label>
          <input id="b-date" placeholder="2025-12-05" />

          <label for="b-category">Category</label>
          <input id="b-category" placeholder="Hiring Tips, Public Sector, Career, ..." />

          <label for="b-excerpt">Short description / excerpt</label>
          <textarea id="b-excerpt"></textarea>

          <label for="b-url">URL (e.g. blog/my-post.html)</label>
          <input id="b-url" placeholder="blog/my-post.html" />

          <button class="primary" id="add-blog-post">Add / update post</button>
        </div>

        <div>
          <h3>Current posts</h3>
          <table class="list-table" id="blog-table">
            <thead>
              <tr>
                <th>Title</th>
                <th>Date</th>
                <th>Category</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <h3>JSON to copy to <code>blog-posts.json</code></h3>
          <div class="json-output" id="blog-json"></div>
          <p class="hint">
            Select all, copy, and paste into the
            <code>blog-posts.json</code> file in GitHub.
          </p>
        </div>
      </div>
    </section>

    <!-- Job templates section (simple placeholder) -->
    <section id="jobs" class="section">
      <h2>Job templates (helper)</h2>
      <p class="hint">
        Use this space to draft job entries for your <code>main.js</code> or any future jobs JSON.
        It does not save automatically to GitHub.
      </p>
      <label for="job-snippet">Job JSON snippet</label>
      <textarea id="job-snippet" placeholder='{
  "title": "Data Engineer",
  "location": "Remote - USA",
  "clearance": "Public Trust",
  "type": "Contract",
  "tags": ["Azure", "ETL", "SQL"]
}'></textarea>
    </section>

    <!-- Info section -->
    <section id="info" class="section">
      <h2>How publishing works</h2>
      <ul class="hint">
        <li>This admin page runs in your browser only (no server saving).</li>
        <li>When you add or edit blog posts here, it generates JSON for you.</li>
        <li>You then copy that JSON and paste it into <code>blog-posts.json</code> in GitHub.</li>
        <li>The main site reads <code>blog-posts.json</code> and updates automatically.</li>
      </ul>
    </section>
  </main>

  <script>
    // Simple section switching
    document.querySelectorAll('.nav button').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById(btn.dataset.target).classList.add('active');
      });
    });

    let blogPosts = [];

    function renderBlogTable() {
      const tbody = document.querySelector('#blog-table tbody');
      tbody.innerHTML = '';
      blogPosts.forEach(post => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><span class="pill">${post.id}</span> ${post.title}</td>
          <td>${post.date}</td>
          <td>${post.category || ''}</td>
        `;
        tr.addEventListener('click', () => {
          // load into form for editing
          document.getElementById('b-id').value = post.id;
          document.getElementById('b-title').value = post.title;
          document.getElementById('b-date').value = post.date;
          document.getElementById('b-category').value = post.category || '';
          document.getElementById('b-excerpt').value = post.excerpt || '';
          document.getElementById('b-url').value = post.url || '';
        });
        tbody.appendChild(tr);
      });

      document.getElementById('blog-json').textContent = JSON.stringify(blogPosts, null, 2);
    }

    async function loadExistingBlogPosts() {
      try {
        const res = await fetch('../blog-posts.json');
        if (!res.ok) return;
        blogPosts = await res.json();
        renderBlogTable();
      } catch (e) {
        console.error('Could not load existing blog posts', e);
      }
    }

    document.getElementById('add-blog-post').addEventListener('click', () => {
      const id = document.getElementById('b-id').value.trim();
      const title = document.getElementById('b-title').value.trim();
      const date = document.getElementById('b-date').value.trim();
      const category = document.getElementById('b-category').value.trim();
      const excerpt = document.getElementById('b-excerpt').value.trim();
      const url = document.getElementById('b-url').value.trim();

      if (!id || !title || !date) {
        alert('ID, Title, and Date are required.');
        return;
      }

      const existingIndex = blogPosts.findIndex(p => p.id === id);
      const post = { id, title, date, category, excerpt, url };

      if (existingIndex >= 0) {
        blogPosts[existingIndex] = post;
      } else {
        blogPosts.unshift(post); // newest first
      }

      renderBlogTable();
    });

    loadExistingBlogPosts();
  </script>
</body>
</html>
